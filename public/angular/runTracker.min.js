(function(){angular.module("runTrackerApp",["ngRoute"]);function r(r){r.when("/",{templateUrl:"/home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/runList",{templateUrl:"/runList/runList.view.html",controller:"runListCtrl",controllerAs:"vm"}).when("/runs/:runid",{templateUrl:"/runs/run.view.html",controller:"runCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"})}angular.module("runTrackerApp").config(["$routeProvider",r])})();(function(){angular.module("runTrackerApp").controller("homeCtrl",r);r.$inject=["runTrackerData"];function r(r){var e=this;e.pageHeader={title:"Welcome to Run Tracker!"};e.addRun=function(n){r.addRun({title:n.runTitle,miles:n.miles,minutes:n.minutes,seconds:n.seconds,notes:n.notes}).success(function(r){e.formError="Success! Added run to the database!"}).error(function(r){e.formError="There was a problem. Did not add run to the database."})};e.onSubmit=function(){e.formError="";if(!e.formData||e.formData.title||!e.formData.miles||!e.formData.minutes||!e.formData.seconds||!e.formData.notes){e.formError="All fields are required.";return false}else{e.addRun(e.formData)}}}})();(function(){angular.module("runTrackerApp").controller("runListCtrl",r);r.$inject=["runTrackerData"];function r(r){var e=this;e.pageHeader={title:"List of runs"};r.getRunList().success(function(r){e.runList=r}).error(function(r){console.log(r)})}})();(function(){angular.module("runTrackerApp").controller("runCtrl",r);r.$inject=["$routeParams","runTrackerData"];function r(r,e){var n=this,t=r.runid;n.pageHeader={title:"Individual run data for run "+t};e.runById(t).success(function(r){n.runData={run:r};n.pageHeader={title:"Individual run data for "+n.runData.date}}).error(function(r){console.log(r)})}})();(function(){angular.module("runTrackerApp").service("runTrackerData",r);r.$inject=["$http"];function r(r){function e(e){return r.get("/api/runs/"+e)}function n(){return r.get("/api/runList")}function t(e){return r.post("/api/runs",e)}return{runById:e,getRunList:n,addRun:t}}})();(function(){angular.module("runTrackerApp").service("authentication",r);r.$inject=["$http, $window"];function r(r,e){var n=function(r){e.localStorage["runTrackerToken"]=r};var t=function(){return e.localStorage["runTrackerToken"]=token};var o=function(){var r=t();if(r){var n=JSON.parse(e.atob(r.split(".")[1]));return n.exp>Date.now()/1e3}else{return false}};var a=function(){if(o()){var r=t();var n=JSON.parse(e.atob(r.split(".")[1]));return{email:n.email,name:n.name}}};var u=function(e){return r.post("/api/register",e).success(function(r){n(r.token)})};var i=function(e){return r.post("/api/login",e).success(function(r){n(r.token)})};var c=function(){e.localStorage.removeItem("runTrackerToken")};return{currentUser:a,saveToken:n,getToken:t,isLoggedIn:o,register:u,login:i,logout:c}}})();(function(){angular.module("runTrackerApp").directive("pageHeader",r);function r(){return{restrict:"E",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();(function(){angular.module("runTrackerApp").directive("pageFooter",r);function r(){return{restrict:"E",templateUrl:"/common/directives/pageFooter/pageFooter.template.html"}}})();(function(){angular.module("runTrackerApp").directive("navigation",r);function r(){return{restrict:"E",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();(function(){angular.module("runTrackerApp").directive("insertRun",r);function r(){return{restrict:"E",scope:{content:"=content"},templateUrl:"/common/directives/insertRun/insertRun.template.html"}}})();